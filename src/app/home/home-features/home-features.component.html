<!-- Pro -->
<mat-tab-group color="warn" mat-align-tabs="center">
  <!--<mat-tab label="Professionel">
    <form class="mt-3" [formGroup]="proForm" (ngSubmit)="sendEstimate('professional')">
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Numero de devis</mat-label>
            <input matInput type="text"
            formControlName="proDevis"
            placeholder="Numero de devis"/>
             &lt;!&ndash; [errorStateMatcher]="matcher" &ndash;&gt;
            <mat-icon matSuffix>receipt</mat-icon>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Nom de la societe</mat-label>
            <input matInput type="text"
            formControlName="proName"
            placeholder="Nom de la societe"/>
             &lt;!&ndash; [errorStateMatcher]="matcher" &ndash;&gt;
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div class="form-group">
         <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Adresse</mat-label>
            <input matInput type="text"
            formControlName="proAddress"
             name="proAddress"
            (onAddressChange)="handleAddressChange($event)"
            autocomplete="doNotAutocomplete"
            id="locate-mePro"
            ngx-google-places-autocomplete
            [options]='options'
            #placesRef="ngx-places"
            placeholder="Adresse"/>
             &lt;!&ndash; [errorStateMatcher]="matcher"&ndash;&gt;
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Ville</mat-label>
            <input matInput type="text"
            formControlName="proCity"
            placeholder="Ville"/>
             &lt;!&ndash; [errorStateMatcher]="matcher" &ndash;&gt;
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
      </div>
        <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Code Postal</mat-label>
            <input matInput type="text"
            formControlName="proZipCode"
            placeholder="Code Postal"/>
             &lt;!&ndash; [errorStateMatcher]="matcher" &ndash;&gt;
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="proMail" placeholder="Email">
            <mat-icon matSuffix>alternate_email</mat-icon>
            <mat-hint></mat-hint>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" floatLabel="always">
            <mat-label>Numero de telephone</mat-label>
            <input matInput type="tel" formControlName="proPhone" placeholder="Exemple: +336...">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-hint></mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div *ngIf="showDateEstimatedPro" class="form-group">
        <p>
          <mat-form-field class="full-width"  appearance="outline" floatLabel="always">
            <mat-label>Date de livraison estimée</mat-label>
            <input matInput type="date" formControlName="proDateEstimated" placeholder="Date de livraison estimée">
          </mat-form-field>
        </p>
      </div>
      <div *ngIf="showDateEstimatedPro" class="form-group">
        <p>
          <mat-radio-group formControlName="proTimeSlot">
            <mat-radio-button value="9h30">9h30</mat-radio-button>
            <mat-radio-button value="17h00">17h00</mat-radio-button>
          </mat-radio-group>
        </p>
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            &lt;!&ndash; <mat-label>Email</mat-label> &ndash;&gt;
            <input matInput type="number"
            formControlName="proAmount"
            placeholder="Montant"/>
             &lt;!&ndash; [errorStateMatcher]="matcher" &ndash;&gt;
            <mat-icon matSuffix>euro</mat-icon>
          </mat-form-field>
        </p>
        &lt;!&ndash;<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>&ndash;&gt;
      </div>
      <div *ngIf="showExpressPro" class="form-group">
        <mat-slide-toggle formControlName="proExpress">Livraison express</mat-slide-toggle>
      </div>

      <div class="form-group">
        <p>
          <mat-form-field class="full-width"  appearance="outline" floatLabel="always">
            <mat-label>Commentaire</mat-label>
            <input matInput type="text" formControlName="proComment" placeholder="Commentaire">
          </mat-form-field>
        </p>
      </div>

      <div *ngIf="totalAmountPro && amountPro && !disabledButton">
        <hr>
        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">SOUS TOTAL</div>
            <div>
              {{ (amountPro.toFixed(2)).replace('.', ',').replace('.', ',') }} €
            </div>
          </div>
        </div>

        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Prix Client</div>
            <div>
              {{ (pricePro.toFixed(2)).replace('.', ',').replace('.', ',') }} €
            </div>
          </div>
        </div>

        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Frais de service</div>
            <div> {{ (serviceCharge.toFixed(2)).replace('.', ',') }} €</div>
          </div>
        </div>
        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Cout Livraison</div>
            <div>
              {{ (deliveryCostPro.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>

        <div *ngIf="deliveryExpressPro" class="align-row">
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Cout Livraison Express</div>
            <div>
              {{ (expressCostPro.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>
        <hr>

        <div class="align-row">
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">TOTAL</div>
            <div>
              {{ (totalAmountPro.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>
        <hr>
      </div>

      &lt;!&ndash; <button mat-raised-button [disabled]="disabledButton" color="primary" (click)= "sendEstimate('professional')"> &ndash;&gt;
      <button type="button" mat-raised-button (click)="onValidateAmount()" color="primary">
        Calculer montant total
        <mat-icon>calculate</mat-icon>
      </button>
      <button mat-raised-button [disabled]="disabledButton" color="primary">
        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
        Envoyer devis
        <mat-icon>send</mat-icon>
      </button>
      <div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>
      <div *ngIf="success" class="alert alert-success mt-3 mb-0">{{success}}</div>
    </form>
  </mat-tab>-->


<!-- Client -->


  <mat-tab label="Client">
    <form class="mt-3" [formGroup]="customerForm" (ngSubmit)="sendEstimate('customer')">
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Numéro de devis</mat-label>
            <input matInput type="text"
            formControlName="customerDevis"
            placeholder="Numéro de devis"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>receipt</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <!-- <mat-label>Email</mat-label> -->
            <input matInput type="text"
            formControlName="customerLastName"
            placeholder="Nom"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>face</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Prénom</mat-label>
            <input matInput type="text"
            formControlName="customerFirstName"
            placeholder="Prénom"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>face</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Adresse</mat-label>
            <input matInput type="text"
            formControlName="customerAddress"
             name="customerAddress"
            (onAddressChange)="handleAddressChange($event, true)"
            autocomplete="doNotAutocomplete"
            id="locate-me"
            ngx-google-places-autocomplete
            [options]='options'
            #placesRef="ngx-places"
            placeholder="Adresse"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <!-- <mat-label>Ville</mat-label> -->
            <input matInput type="text"
            formControlName="customerCity"
            placeholder="Ville"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Code Postal</mat-label>
            <input matInput type="text"
            formControlName="customerZipCode"
            placeholder="Code Postal"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>apartment</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="customerMail" placeholder="Email">
            <mat-icon matSuffix>alternate_email</mat-icon>
            <mat-hint></mat-hint>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" floatLabel="always">
            <mat-label>Numero de telephone</mat-label>
            <input matInput type="tel" formControlName="customerPhone" placeholder="Exemple: +336...">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-hint></mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div *ngIf="showDateEstimatedCustomer" class="form-group">
        <p>
          <mat-form-field class="full-width"  appearance="outline" floatLabel="always">
            <mat-label>Date de livraison estimée</mat-label>
            <input matInput type="date" formControlName="customerDateEstimated" placeholder="Date de livraison estimée">
          </mat-form-field>
        </p>
      </div>
      <div *ngIf="showDateEstimatedCustomer" class="form-group">
        <p>
          <mat-radio-group formControlName="customerTimeSlot" id="gui">
            <mat-radio-button value="9h30">9h30</mat-radio-button>
            <mat-radio-button value="17h00">17h00</mat-radio-button>
          </mat-radio-group>
        </p>
      </div>
      <div class="form-group">
        <p>
          <mat-form-field class="full-width" appearance="outline" >
            <mat-label>Montant</mat-label>
            <input matInput type="number"
            formControlName="customerAmount"
            placeholder="Montant"/>
             <!-- [errorStateMatcher]="matcher" -->
            <mat-icon matSuffix>euro</mat-icon>
          </mat-form-field>
        </p>
        <!--<div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Username is required</div>
        </div>-->
      </div>
      <div *ngIf="showExpressCustomer" class="form-group">
        <mat-slide-toggle formControlName="customerExpress">Livraison express</mat-slide-toggle>
      </div>

      <div class="form-group">
        <p>
          <mat-form-field class="full-width"  appearance="outline" floatLabel="always">
            <!-- <mat-label>Choose a date</mat-label> -->
            <input matInput type="text" formControlName="customerComment" placeholder="Commentaire">
          </mat-form-field>
        </p>
      </div>

      <div *ngIf="totalAmountCustomer && amountCustomer && !disabledButton">
        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex; padding: 1rem; background: #90f777" class="col-md-6">
            <div style="flex: 1; text-transform: uppercase">Prix Client</div>
            <div>
              {{ (priceCustomer.toFixed(2)).replace('.', ',').replace('.', ',') }} €
            </div>
          </div>
        </div>
        <hr>
        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex; color: #949494" class="col-md-6">
            <div style="flex: 1">Montant Saisi</div>
            <div>
              {{ (amountCustomer.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>

        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Frais de service</div>
            <div>{{ (serviceCharge.toFixed(2)).replace('.', ',') }} €</div>
          </div>
        </div>
        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Cout Livraison</div>
            <div>
              {{ (deliveryCostCustomer.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>

        <div *ngIf="deliveryExpressCustomer" class="align-row">
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">Cout Livraison Express</div>
            <div>
              {{ (expressCostCustomer.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>
        <hr>

        <div class="align-row">
          <div class="col-md-6">
          </div>
          <hr>
          <div style="display: flex" class="col-md-6">
            <div style="flex: 1">TOTAL</div>
            <div>
              {{ (totalAmountCustomer.toFixed(2)).replace('.', ',') }} €
            </div>
          </div>
        </div>
        <hr>
      </div>

      <button type="button" mat-raised-button (click)="onValidateAmount(true)" color="primary">
        Calculer montant total
        <mat-icon>calculate</mat-icon>
      </button>
      <!-- <button mat-raised-button [disabled]="disabledButton"  type="button" (click)="sendEstimate('customer')" color="primary"> -->
        <button mat-raised-button [disabled]="disabledButton" color="primary">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Envoyer devis
        <mat-icon>send</mat-icon>
      </button>
      <div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>
      <div *ngIf="success" class="alert alert-success mt-3 mb-0">{{success}}</div>
    </form>
  </mat-tab>
</mat-tab-group>




